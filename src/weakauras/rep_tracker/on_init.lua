aura_env.reputations = {
    -- ["factionID"] = iconID,
    -- factionID is used as the key in custom options
    -- iconID is the ID of the icon you want shown for the reputation, if you don't define one, the fallback icon will be used
    
    --The War Within
    ["2600"] = 5891370, -- The Severed Threads
    ["2605"] = 5862762, -- The General
    ["2607"] = 5862763, -- The Vizier
    ["2601"] = 5862764, -- The Weaver
    ["2570"] = 5891368, -- Hallowfall Arathi
    ["2594"] = 5891367, -- Assembly of the Deeps
    ["2590"] = 5891369, -- Council of Dornogal
    ["2640"] = 5453546, -- Brann Bronzebeard
    
    -- Dragonflight
    ["2503"] = 4566591, -- Maruuk Centaur
    ["2507"] = 3012071, -- Dragonscale Expedition
    ["2511"] = 4687629, -- Iskaara Tuskarr
    ["2510"] = 4569780, -- Valdrakken Accord
    ["2523"] = 4574311, -- Dark Talons
    ["2524"] = 4574311, -- Obsidian Warders
    ["2564"] = 1786409, -- Loamm Niffen
    ["2574"] = 341763, -- Dream Wardens
    
    -- Shadowlands
    ["2413"] = 3257751, -- Court of Harvesters
    ["2407"] = 3257748, -- The Ascended
    ["2410"] = 3641396, -- The Undying Army
    ["2465"] = 3641394, -- The Wild Hunt
    ["2439"] = 1044087, -- The Avowed
    ["2470"] = 3052062, -- Death's Advance
    ["2432"] = 3528299, -- Ve'nari
    ["2472"] = 2101967, -- The Archivists' Codex
    ["2478"] = 3601566, -- The Enlightened
    
    -- Battle for Azeroth
    ["2164"] = 132275, -- Champions of Azeroth
    ["2161"] = 2065572, -- Order of Embers
    ["2160"] = 2065573, -- Proudmoore Admiralty
    ["2156"] = 797509, -- Talanji's Expedition
    ["2157"] = 463451, -- The Honorbound
    ["2163"] = 1719412, -- Tortollan Seekers
    ["2158"] = 2495963, -- Voldunai
    ["2103"] = 1726348, -- Zandalari Empire
    ["2159"] = 255130, -- 7th Legion
    ["2162"] = 136050, -- Storm's Wake
    ["2417"] = 454772, -- Uldum Accord
    ["2415"] = 839983, -- Rajani
    ["2391"] = 3208032, -- Rustbolt Resistance
    ["2373"] = 2620776, -- The Unshackled
    ["2400"] = 2620775, -- Waveblade Ankoan
    
    -- Legion
    ["1859"] = 1525362, -- The nightfallen
    ["2018"] = 1531511, -- Talon's Vengeance
    ["1900"] = 1447607, -- Court of Farondis
    ["1948"] = 1447611, -- Valarjar
    ["2170"] = 1708511, -- Argussian Reach
    ["1828"] = 1447612, -- Highmountain Tribe
    ["1883"] = 1447610, -- Dreamweavers
    ["2045"] = 1585245, -- Armies of Legionfall
    ["2165"] = 1608729, -- Army of the Light
    ["1894"] = 1447613, -- The Wardens
    
    -- Warlords of Draenor
    ["1711"] = 1052654, -- Steamwheedle Preservation Society
    ["1445"] = 1044164, -- Frostwolf Orcs
    ["1849"] = 1240656, -- Order of the Awakened
    ["1515"] = 1042646, -- Arakkoa Outcasts
    ["1710"] = 1042739, -- Sha'tari Defense
    ["1708"] = 970584, -- Laughing Skull Orcs
    ["1850"] = 1240657, -- The Saberstalkers
    ["1731"] = 1048727, -- Council of Exarchs
    ["1848"] = 133284, -- Vol'jin's Headhunters
    ["1847"] = 921904, -- Hand of the Prophet
    
    -- Mists of Pandaria
    ["1271"] = 646324, -- Order of the Cloud Serpent
    ["1341"] = 656174, -- The August Celestials
    ["1270"] = 645204, -- Shado-Pan
    ["1269"] = 643910, -- Golden Lotus
    ["1272"] = 645198, -- The Tillers
    ["1277"] = 134141, -- Chee Chee
    ["1275"] = 454045, -- Ella
    ["1283"] = 651600, -- Farmer Fung
    ["1282"] = 651598, -- Fish Fellreed
    ["1281"] = 651596, -- Gina Mudclaw
    ["1279"] = 651597, -- Haohan Mudclaw
    ["1273"] = 651591, -- Jogu the Drunk
    ["1276"] = 651567, -- Old Hillpaw
    ["1278"] = 133975, -- Sho
    ["1280"] = 651569, -- Tina Mudclaw
    ["1302"] = 4620674, -- The Anglers
    ["1358"] = 4620674, -- Nat Pagle
    ["1435"] = 838811, -- Shado-Pan Assault
    ["1492"] = 901300, -- Emperor Shaohao
    ["1345"] = 645218, -- The Lorewalkers
    ["1359"] = 656543, -- The Black Prince
    ["1375"] = 463451, -- Dominance Offensive
    ["1376"] = 463450, -- Operation: Shieldwall
    ["1337"] = 646377, -- The Klaxxi
    ["1387"] = 801132, -- Kirin Tor Offensive
    ["1388"] = 838819, -- Sunreaver Onslaught
    
    -- Cataclysm
    ["1173"] = 456574, -- Ramkahen
    ["1204"] = 512609, -- Avengers of Hyjal
    ["1135"] = 456567, -- The Earthen Ring
    ["1172"] = 456565, -- Dragonmaw Clan
    ["1171"] = 456572, -- Therazane
    ["1158"] = 456570, -- Guardians of Hyjal
    ["1178"] = 409548, -- Hellscream's Reach
    ["1174"] = 456575, -- Wildhammer Clan
    ["1177"] = 462529, -- Baradin's Wardens
    
    -- Wrath of the Lich King
    ["1119"] = 136050, -- The Sons of Hodir
    ["1098"] = 133445, -- The Ebon Blade
    ["1106"] = 134500, -- Argent Crusade
    ["1073"] = 132933, -- The Kalu'ak
    ["1105"] = 132833, -- The Oracles
    ["1090"] = 135820, -- Kirin Tor
    ["1091"] = 236234, -- The Wyrmrest Accord
    ["1050"] = 134474, -- Valiance Expedition
    ["1156"] = 335962, -- The Ashen Verdict
    ["1104"] = 132791, -- Frenzyheart Tribe
    ["1124"] = 134473, -- The Sunreavers
    ["1067"] = 236560, -- The Hand of Vengeance
    ["1052"] = 255142, -- Horde Expedition
    ["1094"] = 134472, -- The Silver Covenant
    ["1037"] = 134474, -- Alliance Vanguard
    ["1085"] = 255142, -- Warsong Offensive
    ["1064"] = 255142, -- The Taunka
    ["1126"] = 134474, -- The Frostborn
    ["1068"] = 134474, -- Explorers' League
    
    -- The Burning Crusade
    ["1015"] = 132250, -- Netherwing
    ["978"] = 134060, -- Kurenai
    ["942"] = 132265, -- Cenarion Expedition
    ["1031"] = 132191, -- Sha'tari Skyguard
    ["934"] = 133365, -- The Scryers
    ["932"] = 136149, -- The Aldor
    ["933"] = 132881, -- The Consortium
    ["989"] = 134157, -- Keepers of Time
    ["970"] = 134532, -- Sporeggar
    ["1077"] = 132237, -- Shattered Sun Offensive
    ["922"] = 133759, -- Tranquillien
    ["941"] = 134060, -- The Mag'har
    ["990"] = 135510, -- The Scale of the Sands
    ["1038"] = 134975, -- Ogri'la
    ["946"] = 134502, -- Honor Hold
    ["1011"] = 133301, -- Lower City
    ["935"] = 133832, -- The Sha'tar
    ["947"] = 134504, -- Thrallmar
    ["967"] = 133404, -- The Violet Eye
    ["1012"] = 133793, -- Ashtongue Deathsworn
    ["936"] = 135760, -- Shattrath City
    
    -- Vanilla
}

aura_env.expansions = {
    "tww",
    "df",
    "sl",
    "bfa",
    "legion",
    "wod",
    "mop",
    "cataclysm",
    "wotlk",
    "tbc",
    "vanilla"
}

-- Config
local colours = aura_env.config.colourOptions
local general = aura_env.config.general

-- Takes a color picker colour and returns a hex colour usable by WA
local getColour = function(colour) 
    return CreateColor(unpack(colour)):GenerateHexColor()
end

-- Takes in some values and adjusts for paragon API returning aggregate amounts
local getParagonValue = function(val, threshold, hasReward)
    -- We need to adjust the value since we get the total amount of paragon reputation ever
    -- This will be done by checking if there's a reward and then mathing out the proper amount to show
    local adjustedVal = val
    
    if val > (threshold*2) or (val > threshold and not hasReward) then
        adjustedVal = val % threshold
    end
    
    if hasReward then
        adjustedVal = val % threshold + threshold
    end
    
    return adjustedVal
end

-- Reputation / Renown Name
aura_env.getColouredRepName = function (repName) 
    local repNameColour = getColour(colours.repNameColour)
    return "|c"..repNameColour..repName..":|r"
end


-- Renown
aura_env.getRenownColouredValue = function(currentRenown, renownThreshold, currentRenownLevel, maxRenownLevel, isMaxRenown, factionID)
    if (isMaxRenown and factionID) then
        local renownColour = getColour(colours.renownParagonActive)
        local renownParagonAvailable = getColour(colours.renownParagonAvailable)
        
        
        local curVal, threshold, _, hasRewardPending = C_Reputation.GetFactionParagonInfo(factionID)
        
        if (not curVal or not threshold) then
            return "0"
        end
        
        local uiValue = getParagonValue(curVal, threshold, hasRewardPending)
        
        local colorToShow = hasRewardPending and renownParagonAvailable or renownColour
        
        return "|c"..colorToShow..uiValue.."/"..threshold.."|r"    
        
    end
    
    local showRenownLevel = general.showRenownLevel
    local showRenownProg = general.showRenownProg
    
    local renownColour = getColour(colours.defaultRenown)
    
    local renownLevelInfo = currentRenownLevel.."/"..maxRenownLevel
    local renownProgressInfo = currentRenown.."/"..renownThreshold
    
    if (showRenownLevel and showRenownProg) then
        return "|c"..renownColour..renownProgressInfo.." ("..renownLevelInfo..")".."|r"
    end
    
    if (showRenownLevel) then
        return "|c"..renownColour..renownLevelInfo.."|r"
    end
    
    if (showRenownProg) then
        return "|c"..renownColour..renownProgressInfo.."|r"
    end
end

-- Reputation (Regular)
aura_env.getColouredValue = function(barMin, barMax, barValue, standingId)
    local nonParagonColour = getColour(colours.nonParagonColour)
    
    -- The UI shows a value/max that is equal to barValue/barMax MINUS barMin
    local currentUIVal = barValue - barMin
    local currentUIMax = barMax - barMin
    
    if (barValue == barMax and barValue > 0) then
        currentUIVal = barMax
        currentUIMax = barMax
    end
    
    local showStanding = general.showCurrentStandingPreExalted and standingId
    local currentStanding = showStanding and (type(standingId) == number and " (".._G["FACTION_STANDING_LABEL"..standingId]..")" or " ("..standingId..")") or ""
    
    
    return "|c"..nonParagonColour..currentUIVal.."/"..currentUIMax..currentStanding.."|r"
end


-- Paragon 
aura_env.getParagonColouredValue = function(val, threshold, hasReward, standingId)
    -- Paragon colours
    local paragonColour = getColour(colours.paragonColour)
    local paragonAvailable = getColour(colours.paragonAvailable)
    local paragonNearCap = getColour(colours.paragonNearCap)
    
    if not (val > threshold) then
        return "|c"..paragonColour..val.."/"..threshold.."|r"
    end
    
    local adjustedVal = getParagonValue(val, threshold, hasReward)
    
    local showStanding = general.showCurrentStandingExalted and standingId
    local currentStanding = showStanding and (type(standingId) == "number" and " (".._G["FACTION_STANDING_LABEL"..standingId]..")" or " ("..standingId..")") or ""
    
    if hasReward then
        if adjustedVal < aura_env.config.colourOptions.nearCapThreshold then
            return "|c"..paragonAvailable..adjustedVal.."/"..threshold..currentStanding.."|r"
        else
            return "|c"..paragonNearCap..adjustedVal.."/"..threshold..currentStanding.."|r"
            
        end
    end
    
    return "|c"..paragonColour..adjustedVal.."/"..threshold..currentStanding.."|r"
end



